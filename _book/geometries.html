<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Geometries | Spatial Data Science</title>
  <meta name="description" content="description_xx" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Geometries | Spatial Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="description_xx" />
  <meta name="github-repo" content="edzer/sdsr" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Geometries | Spatial Data Science" />
  
  <meta name="twitter:description" content="description_xx" />
  

<meta name="author" content="Edzer Pebesma, Roger Bivand" />


<meta name="date" content="2020-10-11" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="cs.html"/>
<link rel="next" href="spherical.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.5.1/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/Proj4Leaflet-1.0.1/proj4-compressed.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.0.3/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.0.3/leaflet-providers-plugin.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/fgb.js"></script>
<script src="libs/FlatGeoBuf-3.3.3/flatgeobuf-geojson.min.js"></script>
<script src="libs/chromajs-2.1.0/chroma.min.js"></script>
<link id="_-BIR74-1-attachment" rel="attachment" href="libs/_-BIR74-0.0.1/_-BIR74_layer.fgb"/>
<link href="libs/HomeButton-0.0.1/home-button.css" rel="stylesheet" />
<script src="libs/HomeButton-0.0.1/home-button.js"></script>
<script src="libs/HomeButton-0.0.1/easy-button-src.min.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>
<link href="libs/mapviewCSS-0.0.1/mapview-popup.css" rel="stylesheet" />
<link href="libs/mapviewCSS-0.0.1/mapview.css" rel="stylesheet" />


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Spatial Data Science</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="part"><span><b>I Spatial Data</b></span></li>
<li class="chapter" data-level="1" data-path="intro.html"><a href="intro.html"><i class="fa fa-check"></i><b>1</b> Getting Started</a><ul>
<li class="chapter" data-level="1.1" data-path="intro.html"><a href="intro.html#a-first-map"><i class="fa fa-check"></i><b>1.1</b> A first map</a></li>
<li class="chapter" data-level="1.2" data-path="intro.html"><a href="intro.html#coordinate-reference-systems"><i class="fa fa-check"></i><b>1.2</b> Coordinate reference systems</a></li>
<li class="chapter" data-level="1.3" data-path="intro.html"><a href="intro.html#raster-and-vector-data"><i class="fa fa-check"></i><b>1.3</b> Raster and vector data</a></li>
<li class="chapter" data-level="1.4" data-path="intro.html"><a href="intro.html#raster-types"><i class="fa fa-check"></i><b>1.4</b> Raster types</a></li>
<li class="chapter" data-level="1.5" data-path="intro.html"><a href="intro.html#time-series-arrays-data-cubes"><i class="fa fa-check"></i><b>1.5</b> Time series, arrays, data cubes</a></li>
<li class="chapter" data-level="1.6" data-path="intro.html"><a href="intro.html#support"><i class="fa fa-check"></i><b>1.6</b> Support</a></li>
<li class="chapter" data-level="1.7" data-path="intro.html"><a href="intro.html#spatial-data-science-software"><i class="fa fa-check"></i><b>1.7</b> Spatial data science software</a></li>
<li class="chapter" data-level="1.8" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>1.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="cs.html"><a href="cs.html"><i class="fa fa-check"></i><b>2</b> Coordinate systems</a><ul>
<li class="chapter" data-level="2.1" data-path="cs.html"><a href="cs.html#polar-and-cartesian-coordinates"><i class="fa fa-check"></i><b>2.1</b> Polar and Cartesian coordinates</a></li>
<li class="chapter" data-level="2.2" data-path="cs.html"><a href="cs.html#ellipsoidal-coordinates"><i class="fa fa-check"></i><b>2.2</b> Ellipsoidal coordinates</a></li>
<li class="chapter" data-level="2.3" data-path="cs.html"><a href="cs.html#projected-coordinates"><i class="fa fa-check"></i><b>2.3</b> Projected coordinates</a></li>
<li class="chapter" data-level="2.4" data-path="cs.html"><a href="cs.html#distances"><i class="fa fa-check"></i><b>2.4</b> Distances</a></li>
<li class="chapter" data-level="2.5" data-path="cs.html"><a href="cs.html#bounded"><i class="fa fa-check"></i><b>2.5</b> Bounded and unbounded spaces</a></li>
<li class="chapter" data-level="2.6" data-path="cs.html"><a href="cs.html#time"><i class="fa fa-check"></i><b>2.6</b> Time</a></li>
<li class="chapter" data-level="2.7" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>2.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="geometries.html"><a href="geometries.html"><i class="fa fa-check"></i><b>3</b> Geometries</a><ul>
<li class="chapter" data-level="3.1" data-path="geometries.html"><a href="geometries.html#simple-feature-geometries"><i class="fa fa-check"></i><b>3.1</b> Simple feature geometries</a></li>
<li class="chapter" data-level="3.2" data-path="geometries.html"><a href="geometries.html#opgeom"><i class="fa fa-check"></i><b>3.2</b> Operations on geometries</a></li>
<li class="chapter" data-level="3.3" data-path="geometries.html"><a href="geometries.html#precision"><i class="fa fa-check"></i><b>3.3</b> Precision</a></li>
<li class="chapter" data-level="3.4" data-path="geometries.html"><a href="geometries.html#geomraster"><i class="fa fa-check"></i><b>3.4</b> Coverages: tesselations and rasters</a></li>
<li class="chapter" data-level="3.5" data-path="geometries.html"><a href="geometries.html#networks"><i class="fa fa-check"></i><b>3.5</b> Networks</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="spherical.html"><a href="spherical.html"><i class="fa fa-check"></i><b>4</b> Spherical Geometries</a><ul>
<li class="chapter" data-level="4.1" data-path="spherical.html"><a href="spherical.html#straight-lines"><i class="fa fa-check"></i><b>4.1</b> Straight lines</a></li>
<li class="chapter" data-level="4.2" data-path="spherical.html"><a href="spherical.html#ring-direction"><i class="fa fa-check"></i><b>4.2</b> Ring direction</a></li>
<li class="chapter" data-level="4.3" data-path="spherical.html"><a href="spherical.html#full-polygon"><i class="fa fa-check"></i><b>4.3</b> Full polygon</a></li>
<li class="chapter" data-level="4.4" data-path="spherical.html"><a href="spherical.html#bounding-box-rectangle-and-cap"><i class="fa fa-check"></i><b>4.4</b> Bounding box, rectangle, and cap</a></li>
<li class="chapter" data-level="4.5" data-path="spherical.html"><a href="spherical.html#validity-on-the-sphere"><i class="fa fa-check"></i><b>4.5</b> Validity on the sphere</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="featureattributes.html"><a href="featureattributes.html"><i class="fa fa-check"></i><b>5</b> Attributes, Up- and Downscaling</a><ul>
<li class="chapter" data-level="5.1" data-path="featureattributes.html"><a href="featureattributes.html#agr"><i class="fa fa-check"></i><b>5.1</b> Attribute-geometry relationships</a></li>
<li class="chapter" data-level="5.2" data-path="featureattributes.html"><a href="featureattributes.html#spatial-join"><i class="fa fa-check"></i><b>5.2</b> Spatial join</a></li>
<li class="chapter" data-level="5.3" data-path="featureattributes.html"><a href="featureattributes.html#aggregating-and-summarising"><i class="fa fa-check"></i><b>5.3</b> Aggregating and Summarising</a></li>
<li class="chapter" data-level="5.4" data-path="featureattributes.html"><a href="featureattributes.html#area-weighted-interpolation"><i class="fa fa-check"></i><b>5.4</b> Area-weighted interpolation</a></li>
<li class="chapter" data-level="5.5" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>5.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="raster.html"><a href="raster.html"><i class="fa fa-check"></i><b>6</b> Raster and vector datacubes</a><ul>
<li class="chapter" data-level="6.1" data-path="raster.html"><a href="raster.html#package-stars"><i class="fa fa-check"></i><b>6.1</b> Package <code>stars</code></a></li>
<li class="chapter" data-level="6.2" data-path="raster.html"><a href="raster.html#raster-data"><i class="fa fa-check"></i><b>6.2</b> Raster data</a></li>
<li class="chapter" data-level="6.3" data-path="raster.html"><a href="raster.html#datacubes"><i class="fa fa-check"></i><b>6.3</b> Vector Datacubes</a></li>
<li class="chapter" data-level="6.4" data-path="intro.html"><a href="intro.html#exercises"><i class="fa fa-check"></i><b>6.4</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="updownscaling.html"><a href="updownscaling.html"><i class="fa fa-check"></i><b>7</b> Up- and Downscaling</a></li>
<li class="chapter" data-level="8" data-path="rs.html"><a href="rs.html"><i class="fa fa-check"></i><b>8</b> Reference Systems</a><ul>
<li class="chapter" data-level="8.1" data-path="rs.html"><a href="rs.html#units"><i class="fa fa-check"></i><b>8.1</b> Units of measurement</a></li>
<li class="chapter" data-level="8.2" data-path="rs.html"><a href="rs.html#temporal-reference-systems"><i class="fa fa-check"></i><b>8.2</b> Temporal Reference Systems</a></li>
<li class="chapter" data-level="8.3" data-path="rs.html"><a href="rs.html#crs"><i class="fa fa-check"></i><b>8.3</b> Coordinate Reference Systems</a></li>
</ul></li>
<li class="part"><span><b>II R for Spatial Data Science</b></span></li>
<li class="chapter" data-level="9" data-path="plotting.html"><a href="plotting.html"><i class="fa fa-check"></i><b>9</b> Plotting spatial data</a><ul>
<li class="chapter" data-level="9.1" data-path="plotting.html"><a href="plotting.html#transform"><i class="fa fa-check"></i><b>9.1</b> Every plot is a projection</a></li>
<li class="chapter" data-level="9.2" data-path="plotting.html"><a href="plotting.html#plotting-points-lines-polygons-grid-cells"><i class="fa fa-check"></i><b>9.2</b> Plotting points, lines, polygons, grid cells</a></li>
<li class="chapter" data-level="9.3" data-path="plotting.html"><a href="plotting.html#classintervals"><i class="fa fa-check"></i><b>9.3</b> Color palettes and class intervals</a></li>
<li class="chapter" data-level="9.4" data-path="plotting.html"><a href="plotting.html#poles-and-datelines"><i class="fa fa-check"></i><b>9.4</b> Poles and datelines</a></li>
<li class="chapter" data-level="9.5" data-path="plotting.html"><a href="plotting.html#graticule"><i class="fa fa-check"></i><b>9.5</b> Graticules and other navigation aids</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="plot.html"><a href="plot.html"><i class="fa fa-check"></i><b>10</b> Base and grid plots</a><ul>
<li class="chapter" data-level="10.1" data-path="plot.html"><a href="plot.html#base-plots"><i class="fa fa-check"></i><b>10.1</b> Base plots</a></li>
<li class="chapter" data-level="10.2" data-path="plot.html"><a href="plot.html#combining-base-plots"><i class="fa fa-check"></i><b>10.2</b> Combining base plots</a></li>
<li class="chapter" data-level="10.3" data-path="plot.html"><a href="plot.html#grid-plots-and-viewports"><i class="fa fa-check"></i><b>10.3</b> Grid plots and viewports</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ggplot2.html"><a href="ggplot2.html"><i class="fa fa-check"></i><b>11</b> ggplot2</a><ul>
<li class="chapter" data-level="11.1" data-path="ggplot2.html"><a href="ggplot2.html#geom_sf"><i class="fa fa-check"></i><b>11.1</b> <code>geom_sf</code></a></li>
<li class="chapter" data-level="11.2" data-path="ggplot2.html"><a href="ggplot2.html#geom_stars"><i class="fa fa-check"></i><b>11.2</b> <code>geom_stars</code></a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="interactive.html"><a href="interactive.html"><i class="fa fa-check"></i><b>12</b> Interactive Maps</a></li>
<li class="part"><span><b>III Models for Spatial Data</b></span></li>
<li class="chapter" data-level="13" data-path="pointpatterns.html"><a href="pointpatterns.html"><i class="fa fa-check"></i><b>13</b> Point Pattern Analysis</a></li>
<li class="chapter" data-level="14" data-path="manipulating-attributes-summarise-aggregate-union-sample.html"><a href="manipulating-attributes-summarise-aggregate-union-sample.html"><i class="fa fa-check"></i><b>14</b> Manipulating attributes: summarise, aggregate, union, sample</a></li>
<li class="chapter" data-level="15" data-path="area-data-and-spatial-autocorrelation.html"><a href="area-data-and-spatial-autocorrelation.html"><i class="fa fa-check"></i><b>15</b> Area Data and Spatial Autocorrelation</a><ul>
<li class="chapter" data-level="15.1" data-path="area-data-and-spatial-autocorrelation.html"><a href="area-data-and-spatial-autocorrelation.html#spatial-autocorrelation"><i class="fa fa-check"></i><b>15.1</b> Spatial autocorrelation</a></li>
<li class="chapter" data-level="15.2" data-path="area-data-and-spatial-autocorrelation.html"><a href="area-data-and-spatial-autocorrelation.html#spatial-weight-matrices"><i class="fa fa-check"></i><b>15.2</b> Spatial weight matrices</a></li>
<li class="chapter" data-level="15.3" data-path="area-data-and-spatial-autocorrelation.html"><a href="area-data-and-spatial-autocorrelation.html#measures-of-spatial-autocorrelation"><i class="fa fa-check"></i><b>15.3</b> Measures of spatial autocorrelation</a></li>
<li class="chapter" data-level="15.4" data-path="area-data-and-spatial-autocorrelation.html"><a href="area-data-and-spatial-autocorrelation.html#spatial-heterogeneity"><i class="fa fa-check"></i><b>15.4</b> Spatial heterogeneity</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="spatial-regression.html"><a href="spatial-regression.html"><i class="fa fa-check"></i><b>16</b> Spatial Regression</a><ul>
<li class="chapter" data-level="16.1" data-path="spatial-regression.html"><a href="spatial-regression.html#spatial-regression-with-spatial-weights"><i class="fa fa-check"></i><b>16.1</b> Spatial regression with spatial weights</a></li>
<li class="chapter" data-level="16.2" data-path="spatial-regression.html"><a href="spatial-regression.html#estimators"><i class="fa fa-check"></i><b>16.2</b> Estimators</a></li>
<li class="chapter" data-level="16.3" data-path="spatial-regression.html"><a href="spatial-regression.html#implementation-details"><i class="fa fa-check"></i><b>16.3</b> Implementation details</a></li>
<li class="chapter" data-level="16.4" data-path="spatial-regression.html"><a href="spatial-regression.html#markov-random-field-and-multilevel-models-with-spatial-weights"><i class="fa fa-check"></i><b>16.4</b> Markov random field and multilevel models with spatial weights</a></li>
</ul></li>
<li class="chapter" data-level="17" data-path="movement-data.html"><a href="movement-data.html"><i class="fa fa-check"></i><b>17</b> Movement data</a></li>
<li class="chapter" data-level="18" data-path="statistical-modelling-of-spatiotemporal-data.html"><a href="statistical-modelling-of-spatiotemporal-data.html"><i class="fa fa-check"></i><b>18</b> Statistical modelling of spatiotemporal data</a></li>
<li class="chapter" data-level="19" data-path="sp-and-raster.html"><a href="sp-and-raster.html"><i class="fa fa-check"></i><b>19</b> sp and raster</a><ul>
<li class="chapter" data-level="19.1" data-path="sp-and-raster.html"><a href="sp-and-raster.html#links-and-differences-between-sf-and-sp"><i class="fa fa-check"></i><b>19.1</b> links and differences between sf and sp</a></li>
<li class="chapter" data-level="19.2" data-path="sp-and-raster.html"><a href="sp-and-raster.html#migration-packages"><i class="fa fa-check"></i><b>19.2</b> migration packages</a></li>
<li class="chapter" data-level="19.3" data-path="sp-and-raster.html"><a href="sp-and-raster.html#raster-stars-and-sf"><i class="fa fa-check"></i><b>19.3</b> raster, stars and sf</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="r-basics.html"><a href="r-basics.html"><i class="fa fa-check"></i>R basics</a><ul>
<li class="chapter" data-level="19.4" data-path="r-basics.html"><a href="r-basics.html#pipes"><i class="fa fa-check"></i><b>19.4</b> Pipes</a></li>
<li class="chapter" data-level="19.5" data-path="r-basics.html"><a href="r-basics.html#data-structures"><i class="fa fa-check"></i><b>19.5</b> Data structures</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Spatial Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="geometries" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Geometries</h1>
<p>Having learned how we describe coordinates systems, we can define
how geometries can be described using these coordinate systems. This
chapter will explain</p>
<ul>
<li><em>simple features</em>, a standard that describes point, line and polygon
geometries along with operations on them,</li>
<li>operations on geometries</li>
<li>coverages, subdivisions of larger regions into sub-regions</li>
<li>rasters, rectangular subdivisions of space</li>
<li>networks</li>
<li>geometries on the sphere</li>
</ul>
<div id="simple-feature-geometries" class="section level2">
<h2><span class="header-section-number">3.1</span> Simple feature geometries</h2>
<p>Simple feature geometries are a way to describe the geometries of
<em>features</em>. By <em>features</em> we mean <em>things</em> that have a geometry,
potentially some time properties, and other attributes that could
include a label describing the thing and quantitative measures of it.
The main application of simple feature geometries is to describe
two-dimensional geometries by points, lines, or polygons. The
“simple” adjective refers to the fact that the line or polygon
geometries are represented by sequences of points connected with
straight lines that do not self-intersect.</p>
<p><em>Simple features access</em> is a standard <span class="citation">(Herring <a href="#ref-sfa">2011</a>, @sfa2, <span class="citation">@iso</span>)</span>
for describing simple feature geometries that includes</p>
<ul>
<li>a class hierarchy</li>
<li>a set of operations</li>
<li>binary and text encodings</li>
</ul>
<p>We will first discuss the seven most common simple feature geometry
types.</p>
<div id="the-big-seven" class="section level3">
<h3><span class="header-section-number">3.1.1</span> The big seven</h3>
<p>The most commonly used simple features geometries, used to represent a <em>single</em> feature are:</p>
<table>
<colgroup>
<col width="22%" />
<col width="77%" />
</colgroup>
<thead>
<tr class="header">
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>POINT</code></td>
<td>single point geometry</td>
</tr>
<tr class="even">
<td><code>MULTIPOINT</code></td>
<td>set of points</td>
</tr>
<tr class="odd">
<td><code>LINESTRING</code></td>
<td>single linestring (two or more points connected by straight lines)</td>
</tr>
<tr class="even">
<td><code>MULTILINESTRING</code></td>
<td>set of linestrings</td>
</tr>
<tr class="odd">
<td><code>POLYGON</code></td>
<td>exterior ring with zero or more inner rings, denoting holes</td>
</tr>
<tr class="even">
<td><code>MULTIPOLYGON</code></td>
<td>set of polygons</td>
</tr>
<tr class="odd">
<td><code>GEOMETRYCOLLECTION</code></td>
<td>set of the geometries above</td>
</tr>
</tbody>
</table>
<pre><code># MULTIPOLYGON (((2 1, 3 1, 5 2, 6 3, 5 3, 4 4, 3 4, 1 3, 2 1), (2 2, 3 3, 4 3, 4 2, 2 2)), ((3 7, 4 7, 5 8, 3 9, 2 8, 3 7)))</code></pre>
<div class="figure" style="text-align: center"><span id="fig:sfgeometries"></span>
<img src="sds_files/figure-html/sfgeometries-1.png" alt="sketches of the main simple feature geometry types" width="672" />
<p class="caption">
Figure 3.1: sketches of the main simple feature geometry types
</p>
</div>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb26-1" title="1"><span class="kw">library</span>(sf)</a>
<a class="sourceLine" id="cb26-2" title="2"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">4</span>))</a>
<a class="sourceLine" id="cb26-3" title="3"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="fl">1.2</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb26-4" title="4"></a>
<a class="sourceLine" id="cb26-5" title="5"><span class="co"># 1</span></a>
<a class="sourceLine" id="cb26-6" title="6">p =<span class="st"> </span><span class="kw">st_point</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb26-7" title="7"><span class="kw">plot</span>(p, <span class="dt">pch =</span> <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb26-8" title="8"><span class="kw">title</span>(<span class="st">&quot;point&quot;</span>)</a>
<a class="sourceLine" id="cb26-9" title="9"><span class="kw">box</span>(<span class="dt">col =</span> <span class="st">&#39;grey&#39;</span>)</a>
<a class="sourceLine" id="cb26-10" title="10"></a>
<a class="sourceLine" id="cb26-11" title="11"><span class="co"># 2</span></a>
<a class="sourceLine" id="cb26-12" title="12">mp =<span class="st"> </span><span class="kw">st_multipoint</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">4</span>)))</a>
<a class="sourceLine" id="cb26-13" title="13"><span class="kw">plot</span>(mp, <span class="dt">pch =</span> <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb26-14" title="14"><span class="kw">title</span>(<span class="st">&quot;multipoint&quot;</span>)</a>
<a class="sourceLine" id="cb26-15" title="15"><span class="kw">box</span>(<span class="dt">col =</span> <span class="st">&#39;grey&#39;</span>)</a>
<a class="sourceLine" id="cb26-16" title="16"></a>
<a class="sourceLine" id="cb26-17" title="17"><span class="co"># 3</span></a>
<a class="sourceLine" id="cb26-18" title="18">ls =<span class="st"> </span><span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)))</a>
<a class="sourceLine" id="cb26-19" title="19"><span class="kw">plot</span>(ls, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb26-20" title="20"><span class="kw">title</span>(<span class="st">&quot;linestring&quot;</span>)</a>
<a class="sourceLine" id="cb26-21" title="21"><span class="kw">box</span>(<span class="dt">col =</span> <span class="st">&#39;grey&#39;</span>)</a>
<a class="sourceLine" id="cb26-22" title="22"></a>
<a class="sourceLine" id="cb26-23" title="23"><span class="co"># 4</span></a>
<a class="sourceLine" id="cb26-24" title="24">mls =<span class="st"> </span><span class="kw">st_multilinestring</span>(<span class="kw">list</span>(</a>
<a class="sourceLine" id="cb26-25" title="25">  <span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="kw">c</span>(<span class="dv">5</span>, <span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">6</span>), <span class="kw">c</span>(<span class="dv">3</span>, <span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">3</span>)),</a>
<a class="sourceLine" id="cb26-26" title="26">  <span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>))))</a>
<a class="sourceLine" id="cb26-27" title="27"><span class="kw">plot</span>(mls, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb26-28" title="28"><span class="kw">title</span>(<span class="st">&quot;multilinestring&quot;</span>)</a>
<a class="sourceLine" id="cb26-29" title="29"><span class="kw">box</span>(<span class="dt">col =</span> <span class="st">&#39;grey&#39;</span>)</a>
<a class="sourceLine" id="cb26-30" title="30"></a>
<a class="sourceLine" id="cb26-31" title="31"><span class="co"># 5 polygon</span></a>
<a class="sourceLine" id="cb26-32" title="32">po =<span class="st"> </span><span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb26-33" title="33">	<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))))</a>
<a class="sourceLine" id="cb26-34" title="34"><span class="kw">plot</span>(po, <span class="dt">border =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">col =</span> <span class="st">&#39;#ff8888&#39;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb26-35" title="35"><span class="kw">title</span>(<span class="st">&quot;polygon&quot;</span>)</a>
<a class="sourceLine" id="cb26-36" title="36"><span class="kw">box</span>(<span class="dt">col =</span> <span class="st">&#39;grey&#39;</span>)</a>
<a class="sourceLine" id="cb26-37" title="37"></a>
<a class="sourceLine" id="cb26-38" title="38"><span class="co"># 6 multipolygon</span></a>
<a class="sourceLine" id="cb26-39" title="39">mpo =<span class="st"> </span><span class="kw">st_multipolygon</span>(<span class="kw">list</span>(</a>
<a class="sourceLine" id="cb26-40" title="40">	<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">6</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">1</span>)),</a>
<a class="sourceLine" id="cb26-41" title="41">		<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">3</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>))),</a>
<a class="sourceLine" id="cb26-42" title="42">	<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">7</span>), <span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">9</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">8</span>), <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">7</span>)))))</a>
<a class="sourceLine" id="cb26-43" title="43">mpo</a>
<a class="sourceLine" id="cb26-44" title="44"><span class="kw">plot</span>(mpo, <span class="dt">border =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">col =</span> <span class="st">&#39;#ff8888&#39;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb26-45" title="45"><span class="kw">title</span>(<span class="st">&quot;multipolygon&quot;</span>)</a>
<a class="sourceLine" id="cb26-46" title="46"><span class="kw">box</span>(<span class="dt">col =</span> <span class="st">&#39;grey&#39;</span>)</a>
<a class="sourceLine" id="cb26-47" title="47"></a>
<a class="sourceLine" id="cb26-48" title="48"><span class="co"># 7 geometrycollection</span></a>
<a class="sourceLine" id="cb26-49" title="49">gc =<span class="st"> </span><span class="kw">st_geometrycollection</span>(<span class="kw">list</span>(po, ls <span class="op">+</span><span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">5</span>), <span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">5</span>)), <span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">5</span>,<span class="dv">4</span>))))</a>
<a class="sourceLine" id="cb26-50" title="50"><span class="kw">plot</span>(gc, <span class="dt">border =</span> <span class="st">&#39;black&#39;</span>, <span class="dt">col =</span> <span class="st">&#39;#ff6666&#39;</span>, <span class="dt">pch =</span> <span class="dv">16</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb26-51" title="51"><span class="kw">title</span>(<span class="st">&quot;geometrycollection&quot;</span>)</a>
<a class="sourceLine" id="cb26-52" title="52"><span class="kw">box</span>(<span class="dt">col =</span> <span class="st">&#39;grey&#39;</span>)</a></code></pre></div>
</details>
<p>Figure <a href="geometries.html#fig:sfgeometries">3.1</a> shows examples of these basic
geometry types. The human-readable, “well-known-text” (WKT) representation
of the geometries plotted are:</p>
<pre><code># POINT (0 1)
# MULTIPOINT ((1 1), (2 2), (4 1), (2 3), (1 4))
# LINESTRING (1 1, 5 5, 5 6, 4 6, 3 4, 2 3)
# MULTILINESTRING ((1 1, 5 5, 5 6, 4 6, 3 4, 2 3), (3 0, 4 1, 2 1))
# POLYGON ((2 1, 3 1, 5 2, 6 3, 5 3, 4 4, 3 4, 1 3, 2 1), (2 2, 3 3, 4 3, 4 2, 2 2))
# MULTIPOLYGON (((2 1, 3 1, 5 2, 6 3, 5 3, 4 4, 3 4, 1 3, 2 1), (2 2, 3 3, 4 3, 4 2, 2 2)), ((3 7, 4 7, 5 8, 3 9, 2 8, 3 7)))
# GEOMETRYCOLLECTION (POLYGON ((2 1, 3 1, 5 2, 6 3, 5 3, 4 4, 3 4, 1 3, 2 1), (2 2, 3 3, 4 3, 4 2, 2 2)), LINESTRING (1 6, 5 10, 5 11, 4 11, 3 9, 2 8), POINT (2 5), POINT (5 4))</code></pre>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb28-1" title="1">p</a>
<a class="sourceLine" id="cb28-2" title="2">mp</a>
<a class="sourceLine" id="cb28-3" title="3">ls</a>
<a class="sourceLine" id="cb28-4" title="4">mls</a>
<a class="sourceLine" id="cb28-5" title="5">po</a>
<a class="sourceLine" id="cb28-6" title="6">mpo</a>
<a class="sourceLine" id="cb28-7" title="7">gc</a></code></pre></div>
</details>
<p>In this representation, coordinates are separated by space, and
points by commas. Sets are denoted by parentheses, and separated
by commas.</p>
<p>Individual points in a geometry contain at least two coordinates:
x and y, in that order. If these coordinates refer to geographic
coordinates, x and y usually refer to longitude and latitude,
respectively, although sometimes to latitude and longitude (see
section <span class="citation">(<span class="citeproc-not-found" data-reference-id="ref"><strong>???</strong></span>)</span>(axisorder)).</p>
</div>
<div id="valid" class="section level3">
<h3><span class="header-section-number">3.1.2</span> Simple and valid geometries, ring direction</h3>
<p>Linestrings are called <em>simple</em> when they do not self-intersect:</p>
<pre><code># LINESTRING (0 0, 1 1, 2 2, 0 2, 1 1, 2 0)
# is_simple 
#     FALSE</code></pre>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" title="1">(<span class="dt">ls =</span> <span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">0</span>))))</a>
<a class="sourceLine" id="cb30-2" title="2"><span class="kw">c</span>(<span class="dt">is_simple =</span> <span class="kw">st_is_simple</span>(ls))</a></code></pre></div>
</details>
<p>Valid polygons and multipolygons obey the following properties:</p>
<ul>
<li>polygon rings are closed (the last point equals the first)</li>
<li>polygon holes (inner rings) are inside their exterior ring</li>
<li>polygon inner rings maximally touch the exterior ring in single points, not over a line</li>
<li>a polygon ring shall not repeat its own path</li>
<li>in a multipolygon, an external ring maximally touches another exterior ring in single points, not over a line</li>
</ul>
<p>If this is not the case, the geometry concerned is not valid.</p>
<p>A further convention is that the outer ring of a polygon is winded
counter-clockwise, while the holes are winded clockwise, but polygons
for which this is not the case are still considered valid.</p>
</div>
<div id="z-and-m-coordinates" class="section level3">
<h3><span class="header-section-number">3.1.3</span> Z and M coordinates</h3>
<p>In addition to X and Y coordinates, Single points (vertices) of
simple feature geometries can have</p>
<ul>
<li>a <code>Z</code> coordinate, denoting altitude, and/or</li>
<li>an <code>M</code> value, denoting some “measure”</li>
</ul>
<p>The <code>M</code> attribute shall be a property of the vertex. It sounds
attractive to encode a time stamp in it, e.g. to pack trajectories
in <code>LINESTRING</code>s. These become however invalid once the trajectory
self-intersects.</p>
<p>Both <code>Z</code> and <code>M</code> are found relatively rarely, and software support
to do something useful with them is (still) rather rare. Their
WKT representation are fairly easily understood:</p>
<pre><code># POINT Z (1 3 2)
# POINT M (1 3 2)
# LINESTRING ZM (3 1 2 4, 4 4 2 2)</code></pre>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb32-1" title="1"><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>))</a>
<a class="sourceLine" id="cb32-2" title="2"><span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>), <span class="dt">dim =</span> <span class="st">&quot;XYM&quot;</span>)</a>
<a class="sourceLine" id="cb32-3" title="3"><span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>), <span class="kw">c</span>(<span class="dv">4</span>,<span class="dv">4</span>,<span class="dv">2</span>,<span class="dv">2</span>)))</a></code></pre></div>
</details>
</div>
<div id="empty-geometries" class="section level3">
<h3><span class="header-section-number">3.1.4</span> Empty geometries</h3>
<p>A very important concept in the feature geometry framework is that of the
empty geometry. We can think of an empty geometry as similar to the
<code>NA</code> value in R vectors: it is a placeholder, but a usable value is
not available. Empty geometries arise naturally when we do geometrical
operations (section <a href="geometries.html#opgeom">3.2</a>), for instance when we want to
know the intersection of <code>POINT (0 0)</code> and <code>POINT (1 1)</code>:</p>
<pre><code># GEOMETRYCOLLECTION EMPTY</code></pre>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb34-1" title="1">(<span class="dt">e =</span> <span class="kw">st_intersection</span>(<span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)), <span class="kw">st_point</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))))</a></code></pre></div>
</details>
<p>All geometry types have a special value representing the empty (typed) geometry:</p>
<pre><code># POINT EMPTY
# LINESTRING M EMPTY</code></pre>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb36-1" title="1"><span class="kw">st_point</span>()</a>
<a class="sourceLine" id="cb36-2" title="2"><span class="kw">st_linestring</span>(<span class="kw">matrix</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">3</span>)[<span class="dv">0</span>,], <span class="dt">dim =</span> <span class="st">&quot;XYM&quot;</span>)</a></code></pre></div>
</details>
</div>
<div id="ten-further-geometry-types" class="section level3">
<h3><span class="header-section-number">3.1.5</span> Ten further geometry types</h3>
<p>There are 10 more geometry types which are more rare, but increasingly find implementation:</p>
<table>
<colgroup>
<col width="27%" />
<col width="72%" />
</colgroup>
<thead>
<tr class="header">
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>CIRCULARSTRING</code></td>
<td>The CIRCULARSTRING is the basic curve type, similar to a LINESTRING in the linear world. A single segment requires three points, the start and end points (first and third) and any other point on the arc. The exception to this is for a closed circle, where the start and end points are the same. In this case the second point MUST be the center of the arc, ie the opposite side of the circle. To chain arcs together, the last point of the previous arc becomes the first point of the next arc, just like in LINESTRING. This means that a valid circular string must have an odd number of points greated than 1.</td>
</tr>
<tr class="even">
<td><code>COMPOUNDCURVE</code></td>
<td>A compound curve is a single, continuous curve that has both curved (circular) segments and linear segments. That means that in addition to having well-formed components, the end point of every component (except the last) must be coincident with the start point of the following component.</td>
</tr>
<tr class="odd">
<td><code>CURVEPOLYGON</code></td>
<td>Example compound curve in a curve polygon: CURVEPOLYGON(COMPOUNDCURVE(CIRCULARSTRING(0 0,2 0, 2 1, 2 3, 4 3),(4 3, 4 5, 1 4, 0 0)), CIRCULARSTRING(1.7 1, 1.4 0.4, 1.6 0.4, 1.6 0.5, 1.7 1) )</td>
</tr>
<tr class="even">
<td><code>MULTICURVE</code></td>
<td>A MultiCurve is a 1-dimensional GeometryCollection whose elements are Curves, it can include linear strings, circular strings or compound strings.</td>
</tr>
<tr class="odd">
<td><code>MULTISURFACE</code></td>
<td>A MultiSurface is a 2-dimensional GeometryCollection whose elements are Surfaces, all using coordinates from the same coordinate reference system.</td>
</tr>
<tr class="even">
<td><code>CURVE</code></td>
<td>A Curve is a 1-dimensional geometric object usually stored as a sequence of Points, with the subtype of Curve specifying the form of the interpolation between Points</td>
</tr>
<tr class="odd">
<td><code>SURFACE</code></td>
<td>A Surface is a 2-dimensional geometric object</td>
</tr>
<tr class="even">
<td><code>POLYHEDRALSURFACE</code></td>
<td>A PolyhedralSurface is a contiguous collection of polygons, which share common boundary segments</td>
</tr>
<tr class="odd">
<td><code>TIN</code></td>
<td>A TIN (triangulated irregular network) is a PolyhedralSurface consisting only of Triangle patches.</td>
</tr>
<tr class="even">
<td><code>TRIANGLE</code></td>
<td>A Triangle is a polygon with 3 distinct, non-collinear vertices and no interior boundary</td>
</tr>
</tbody>
</table>
<p><code>CIRCULASTRING</code>, <code>COMPOUNDCURVE</code> and <code>CURVEPOLYGON</code> are not
described in the SFA standard, but in the <a href="https://www.iso.org/standard/38651.html">SQL-MM part 3
standard</a>. The
descriptions above were copied from the <a href="http://postgis.net/docs/using_postgis_dbmanagement.html">PostGIS
manual</a>.</p>
</div>
<div id="text-and-binary-encodings" class="section level3">
<h3><span class="header-section-number">3.1.6</span> Text and binary encodings</h3>
<p>Part of the simple feature standard are two encodings: a text and
a binary encoding. The well-known text encoding, used above, is
human-readable, the well-known binary encoding is machine-readable.
Binary encodings are lossless and typically faster than text encoding
(and parsing), and are used for instance in all communications
between R package <code>sf</code> and the GDAL, GEOS, liblwgeom and s2geometry
libraries.</p>
</div>
</div>
<div id="opgeom" class="section level2">
<h2><span class="header-section-number">3.2</span> Operations on geometries</h2>
<p>Simple feature geometries can be queried for properties,
transformed into new geometries, and combinations of geometries can
be queried for properties. This section gives an overview of the
operations entirely focusing on <em>geometrical</em> properties. Chapter,
<a href="featureattributes.html#featureattributes">5</a>, focuses on the analysis of non-geometrical
feature properties, in relationship to their geometries. Some of
the material in this section appeared in <span class="citation">(Pebesma <a href="#ref-rjsf">2018</a>)</span>.</p>
<p>We can categorise operations on geometries in terms of what they
take as input, and what they return as output. In terms of output
we have operations that return</p>
<ul>
<li><strong>predicates</strong>: a logical asserting a certain property is <code>TRUE</code>,</li>
<li><strong>measures</strong>: a value (e.g. a numeric value with measurement unit), or</li>
<li><strong>transformations</strong>: newly generated geometries</li>
</ul>
<p>and in terms of what they operate on, we distinguish operations
that are</p>
<ul>
<li><strong>unary</strong> when they work on a single geometry</li>
<li><strong>binary</strong> when they work on pairs of geometries</li>
<li><strong>n-ary</strong> when they work on sets of geometries</li>
</ul>
<div id="unary-predicates" class="section level3">
<h3><span class="header-section-number">3.2.1</span> Unary predicates</h3>
<p>Unary predicates describe a certain property of a geometry.
The predicates <code>is_simple</code>, <code>is_valid</code>, and <code>is_empty</code> returns
respectively whether a geometry is simple, valid or empty. Given a
coordinate reference system, <code>is_longlat</code> returns whether the
coordinates are geographic or projected. <code>is(geometry, class)</code>
checks whether a geometry belongs to a particular class.</p>
</div>
<div id="de9im" class="section level3">
<h3><span class="header-section-number">3.2.2</span> Binary predicates and DE-9IM</h3>
<p>The Dimensionally Extended nine-Intersection Model (DE-9IM,
<span class="citation">(Clementini, Di Felice, and Oosterom <a href="#ref-de9im1">1993</a>, @de9im2)</span>) is a model that helps describing the qualitative
relation between any two geometries in two-dimensional space
(<span class="math inline">\(R^2\)</span>). Any geometry has a <em>dimension</em> value that is</p>
<ul>
<li>0 for points,</li>
<li>1 for linear geometries,</li>
<li>2 for polygonal geometries, and</li>
<li>F (false) for empty geometries.</li>
</ul>
<p>Any geometry also has an inside (I), a boundary (B) and an exterior (E); these
roles are obvious for polygons but e.g. for</p>
<ul>
<li><strong>lines</strong> the boundary is formed by the end points, and the interior
by all remaining points,</li>
<li><strong>points</strong> have a zero-dimensional inside but no boundary</li>
</ul>
<div class="figure" style="text-align: center"><span id="fig:de9im"></span>
<img src="sds_files/figure-html/de9im-1.png" alt="DE-9IM: intersections between the interior, boundary and exterior of a polygon (rows) and of a linestring (columns) indicated by red" width="672" />
<p class="caption">
Figure 3.2: DE-9IM: intersections between the interior, boundary and exterior of a polygon (rows) and of a linestring (columns) indicated by red
</p>
</div>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb37-1" title="1"><span class="kw">library</span>(sf)</a>
<a class="sourceLine" id="cb37-2" title="2">polygon =<span class="st"> </span>po =<span class="st"> </span><span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>))))</a>
<a class="sourceLine" id="cb37-3" title="3">p0 =<span class="st"> </span><span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="op">-</span><span class="dv">1</span>), <span class="kw">c</span>(<span class="dv">2</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="dv">2</span>), <span class="kw">c</span>(<span class="op">-</span><span class="dv">1</span>,<span class="op">-</span><span class="dv">1</span>))))</a>
<a class="sourceLine" id="cb37-4" title="4">line =<span class="st"> </span>li =<span class="st"> </span><span class="kw">st_linestring</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(.<span class="dv">5</span>, <span class="fl">-.5</span>), <span class="kw">c</span>(.<span class="dv">5</span>, <span class="fl">0.5</span>)))</a>
<a class="sourceLine" id="cb37-5" title="5">s =<span class="st"> </span><span class="kw">st_sfc</span>(po, li)</a>
<a class="sourceLine" id="cb37-6" title="6"></a>
<a class="sourceLine" id="cb37-7" title="7"><span class="kw">par</span>(<span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">3</span>,<span class="dv">3</span>))</a>
<a class="sourceLine" id="cb37-8" title="8"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>,<span class="dv">1</span>))</a>
<a class="sourceLine" id="cb37-9" title="9"></a>
<a class="sourceLine" id="cb37-10" title="10"><span class="co"># &quot;1020F1102&quot;</span></a>
<a class="sourceLine" id="cb37-11" title="11"><span class="co"># 1: 1</span></a>
<a class="sourceLine" id="cb37-12" title="12"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;I(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;I(line) = 1&quot;</span>)))</a>
<a class="sourceLine" id="cb37-13" title="13"><span class="kw">lines</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(.<span class="dv">5</span>,<span class="dv">0</span>), <span class="kw">c</span>(.<span class="dv">5</span>,.<span class="dv">495</span>)), <span class="dt">col =</span> <span class="st">&#39;red&#39;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb37-14" title="14"><span class="kw">points</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="dt">pch =</span> <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb37-15" title="15"></a>
<a class="sourceLine" id="cb37-16" title="16"><span class="co"># 2: 0</span></a>
<a class="sourceLine" id="cb37-17" title="17"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;I(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;B(line) = 0&quot;</span>)))</a>
<a class="sourceLine" id="cb37-18" title="18"><span class="kw">points</span>(<span class="fl">0.5</span>, <span class="fl">0.5</span>, <span class="dt">col =</span> <span class="st">&#39;red&#39;</span>, <span class="dt">pch =</span> <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb37-19" title="19"></a>
<a class="sourceLine" id="cb37-20" title="20"><span class="co"># 3: 2</span></a>
<a class="sourceLine" id="cb37-21" title="21"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;I(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;E(line) = 2&quot;</span>)))</a>
<a class="sourceLine" id="cb37-22" title="22"><span class="kw">plot</span>(po, <span class="dt">col =</span> <span class="st">&#39;#ff8888&#39;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb37-23" title="23"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb37-24" title="24"></a>
<a class="sourceLine" id="cb37-25" title="25"><span class="co"># 4: 0</span></a>
<a class="sourceLine" id="cb37-26" title="26"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;B(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;I(line) = 0&quot;</span>)))</a>
<a class="sourceLine" id="cb37-27" title="27"><span class="kw">points</span>(.<span class="dv">5</span>, <span class="dv">0</span>, <span class="dt">col =</span> <span class="st">&#39;red&#39;</span>, <span class="dt">pch =</span> <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb37-28" title="28"></a>
<a class="sourceLine" id="cb37-29" title="29"><span class="co"># 5: F</span></a>
<a class="sourceLine" id="cb37-30" title="30"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;B(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;B(line) = F&quot;</span>)))</a>
<a class="sourceLine" id="cb37-31" title="31"></a>
<a class="sourceLine" id="cb37-32" title="32"><span class="co"># 6: 1</span></a>
<a class="sourceLine" id="cb37-33" title="33"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;B(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;E(line) = 1&quot;</span>)))</a>
<a class="sourceLine" id="cb37-34" title="34"><span class="kw">plot</span>(po, <span class="dt">border =</span> <span class="st">&#39;red&#39;</span>, <span class="dt">col =</span> <span class="ot">NA</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb37-35" title="35"></a>
<a class="sourceLine" id="cb37-36" title="36"><span class="co"># 7: 1</span></a>
<a class="sourceLine" id="cb37-37" title="37"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;E(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;I(line) = 1&quot;</span>)))</a>
<a class="sourceLine" id="cb37-38" title="38"><span class="kw">lines</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(.<span class="dv">5</span>, <span class="fl">-.5</span>), <span class="kw">c</span>(.<span class="dv">5</span>, <span class="dv">0</span>)), <span class="dt">col =</span> <span class="st">&#39;red&#39;</span>, <span class="dt">lwd =</span> <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb37-39" title="39"></a>
<a class="sourceLine" id="cb37-40" title="40"><span class="co"># 8: 0</span></a>
<a class="sourceLine" id="cb37-41" title="41"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;E(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;B(line) = 0&quot;</span>)))</a>
<a class="sourceLine" id="cb37-42" title="42"><span class="kw">points</span>(.<span class="dv">5</span>, <span class="fl">-.5</span>, <span class="dt">col =</span> <span class="st">&#39;red&#39;</span>, <span class="dt">pch =</span> <span class="dv">16</span>)</a>
<a class="sourceLine" id="cb37-43" title="43"></a>
<a class="sourceLine" id="cb37-44" title="44"><span class="co"># 9: 2</span></a>
<a class="sourceLine" id="cb37-45" title="45"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">main =</span> <span class="kw">expression</span>(<span class="kw">paste</span>(<span class="st">&quot;E(pol)&quot;</span>,<span class="kw">intersect</span>(),<span class="st">&quot;E(line) = 2&quot;</span>)))</a>
<a class="sourceLine" id="cb37-46" title="46"><span class="kw">plot</span>(p0 <span class="op">/</span><span class="st"> </span>po, <span class="dt">col =</span> <span class="st">&#39;#ff8888&#39;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a>
<a class="sourceLine" id="cb37-47" title="47"><span class="kw">plot</span>(s, <span class="dt">col =</span> <span class="kw">c</span>(<span class="ot">NA</span>, <span class="st">&#39;darkgreen&#39;</span>), <span class="dt">border =</span> <span class="st">&#39;blue&#39;</span>, <span class="dt">add =</span> <span class="ot">TRUE</span>)</a></code></pre></div>
</details>
<p>Figure <a href="geometries.html#fig:de9im">3.2</a> shows the intersections between the I,
B and E components of a polygon and a linestring indicated by red;
the sub-plot title gives the dimension of these intersections (0,
1, 2 or F). The relationship between the two geometries is the
concatenation of these dimensions:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb38-1" title="1"><span class="kw">st_relate</span>(polygon, line)</a>
<a class="sourceLine" id="cb38-2" title="2"><span class="co">#      [,1]       </span></a>
<a class="sourceLine" id="cb38-3" title="3"><span class="co"># [1,] &quot;1020F1102&quot;</span></a></code></pre></div>
<p>Using the ability to express relationships, we can also query
pairs of geometries about particular conditions expressed in a
<em>mask string</em>; e.g. the string <code>"*0*******"</code> would evaluate <code>TRUE</code>
when the second geometry has one or more boundary points in common
with the interior of the first geometry; the symbol <code>*</code> standing for
“any dimensionality” (0, 1, 2 or F). The mask string <code>"T********"</code>
matches pairs of geometry with intersecting interiors. Here, the
symbol <code>T</code> stands for any intersection (of dimensionality 0, 1 or 2).</p>
<p>Binary predicates are further described using normal-language verbs,
using DE-9IM definitions. For instance, the predicate <code>equals</code>
corresponds to the relationship "T*F**FFF*". If any two geometries
obey this relationship, they are (topologically) equal, but may
have a different ordering of nodes.</p>
<p>A list of binary predicates is</p>
<table>
<colgroup>
<col width="24%" />
<col width="60%" />
<col width="14%" />
</colgroup>
<thead>
<tr class="header">
<th>predicate</th>
<th>meaning</th>
<th>inverse of</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>equals</code></td>
<td>Two geometries A and B are topologically identical</td>
<td></td>
</tr>
<tr class="even">
<td><code>contains</code></td>
<td>None of the points of A are outside B</td>
<td><code>within</code></td>
</tr>
<tr class="odd">
<td><code>contains_properly</code></td>
<td>A contains B and B has no points in common with the boundary of A</td>
<td></td>
</tr>
<tr class="even">
<td><code>covers</code></td>
<td>No points of B lie in the exterior of A</td>
<td><code>covered_by</code></td>
</tr>
<tr class="odd">
<td><code>covered_by</code></td>
<td>inverse of <code>covers</code></td>
<td></td>
</tr>
<tr class="even">
<td><code>crosses</code></td>
<td>A and B have some but not all interior points in common</td>
<td></td>
</tr>
<tr class="odd">
<td><code>disjoint</code></td>
<td>A and B have no points in common</td>
<td><code>intersects</code></td>
</tr>
<tr class="even">
<td><code>equals</code></td>
<td>A and B are geometrically equal; node order number of nodes may differ; identical to A contains B AND A within B</td>
<td></td>
</tr>
<tr class="odd">
<td><code>equals_exact</code></td>
<td>A and B are geometrically equal, and have identical node order</td>
<td></td>
</tr>
<tr class="even">
<td><code>intersects</code></td>
<td>A and B are not disjoint</td>
<td><code>disjoint</code></td>
</tr>
<tr class="odd">
<td><code>is_within_distance</code></td>
<td>A is closer to B than a given distance</td>
<td></td>
</tr>
<tr class="even">
<td><code>within</code></td>
<td>None of the points of B are outside A</td>
<td><code>contains</code></td>
</tr>
<tr class="odd">
<td><code>touches</code></td>
<td>A and B have at least one boundary point in common, but no interior points</td>
<td></td>
</tr>
<tr class="even">
<td><code>overlaps</code></td>
<td>A and B have some points in common; the dimension of these is identical to that of A and B</td>
<td></td>
</tr>
<tr class="odd">
<td><code>relate</code></td>
<td>given a mask pattern, returns whether A and B adhere to this pattern</td>
<td></td>
</tr>
</tbody>
</table>
<p>The <a href="https://en.wikipedia.org/wiki/DE-9IM">Wikipedia DE-9IM page</a>
provides the <code>relate</code> patterns for each of these verbs. They are
important to check out; for instance <em>covers</em> and <em>contains</em> (and
their inverses) are often not directly intuitive:</p>
<ul>
<li>if A <em>contains</em> B, B has no points in common with the exterior <em>or
boundary</em> of A</li>
<li>if A <em>covers</em> B, B has no points in common with the exterior of A</li>
</ul>
</div>
<div id="unary-measures" class="section level3">
<h3><span class="header-section-number">3.2.3</span> Unary Measures</h3>
<p>Unary measures return a single value that describes a property of
the geometry:</p>
<table>
<colgroup>
<col width="25%" />
<col width="74%" />
</colgroup>
<thead>
<tr class="header">
<th>measure</th>
<th>returns</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>dimension</code></td>
<td>0 for points, 1 for linear, 2 for polygons, <code>NA</code> for empty geometries</td>
</tr>
<tr class="even">
<td><code>area</code></td>
<td>the area of a geometry</td>
</tr>
<tr class="odd">
<td><code>length</code></td>
<td>the length of a linear geometry</td>
</tr>
<tr class="even">
<td><code>geohash</code></td>
<td>the <a href="https://en.wikipedia.org/wiki/Geohash">geohash</a> for a geometry</td>
</tr>
<tr class="odd">
<td><code>geometry_type</code></td>
<td>the type of a geometries</td>
</tr>
</tbody>
</table>
</div>
<div id="binary-measures" class="section level3">
<h3><span class="header-section-number">3.2.4</span> Binary Measures</h3>
<p><code>distance</code> returns the distances between pairs of geometries.
<code>relate</code> (without mask) returns the relation pattern, a qualitative
description of the geometrical relationship between two geometries
explained in section <a href="geometries.html#de9im">3.2.2</a>.</p>
</div>
<div id="unary-transformers" class="section level3">
<h3><span class="header-section-number">3.2.5</span> Unary Transformers</h3>
<p>Unary transformations work on a per-geometry basis, and for each geometry return a new geometry.</p>
<table>
<colgroup>
<col width="24%" />
<col width="75%" />
</colgroup>
<thead>
<tr class="header">
<th>transformer</th>
<th>returns a geometry …</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>centroid</code></td>
<td>of type <code>POINT</code> with the geometry’s centroid</td>
</tr>
<tr class="even">
<td><code>buffer</code></td>
<td>that is this larger (or smaller) than the input geometry, depending on the buffer size</td>
</tr>
<tr class="odd">
<td><code>jitter</code></td>
<td>that was moved in space a certain amount, using a bivariate uniform distribution</td>
</tr>
<tr class="even">
<td><code>wrap_dateline</code></td>
<td>cut into pieces that do no longer cover the dateline</td>
</tr>
<tr class="odd">
<td><code>boundary</code></td>
<td>with the boundary of the input geometry</td>
</tr>
<tr class="even">
<td><code>convex_hull</code></td>
<td>that forms the convex hull of the input geometry (figure <a href="geometries.html#fig:vor">3.3</a>)</td>
</tr>
<tr class="odd">
<td><code>line_merge</code></td>
<td>after merging connecting <code>LINESTRING</code> elements of a <code>MULTILINESTRING</code> into longer <code>LINESTRING</code>s.</td>
</tr>
<tr class="even">
<td><code>make_valid</code></td>
<td>that is valid</td>
</tr>
<tr class="odd">
<td><code>node</code></td>
<td>with added nodes to linear geometries at intersections without a node; only works on individual linear geometries</td>
</tr>
<tr class="even">
<td><code>point_on_surface</code></td>
<td>with a (arbitrary) point on a surface</td>
</tr>
<tr class="odd">
<td><code>polygonize</code></td>
<td>of type polygon, created from lines that form a closed ring</td>
</tr>
<tr class="even">
<td><code>segmentize</code></td>
<td>a (linear) geometry with nodes at a given density or minimal distance</td>
</tr>
<tr class="odd">
<td><code>simplify</code></td>
<td>simplified by removing vertices/nodes (lines or polygons)</td>
</tr>
<tr class="even">
<td><code>split</code></td>
<td>that has been split with a splitting linestring</td>
</tr>
<tr class="odd">
<td><code>transform</code></td>
<td>transformed to a new coordinate reference system (chapter <a href="rs.html#rs">8</a>)</td>
</tr>
<tr class="even">
<td><code>triangulate</code></td>
<td>with triangulated polygon(s)</td>
</tr>
<tr class="odd">
<td><code>voronoi</code></td>
<td>with the voronoi tesselation of an input geometry (figure <a href="geometries.html#fig:vor">3.3</a>)</td>
</tr>
<tr class="even">
<td><code>zm</code></td>
<td>with removed or added <code>Z</code> and/or <code>M</code> coordinates</td>
</tr>
<tr class="odd">
<td><code>collection_extract</code></td>
<td>with subgeometries from a <code>GEOMETRYCOLLECTION</code> of a particular type</td>
</tr>
<tr class="even">
<td><code>cast</code></td>
<td>that is converted to another type</td>
</tr>
<tr class="odd">
<td><code>+</code></td>
<td>that is shifted over a given vector</td>
</tr>
<tr class="even">
<td><code>*</code></td>
<td>that is multiplied by a scalar or matrix</td>
</tr>
</tbody>
</table>
<div class="figure" style="text-align: center"><span id="fig:vor"></span>
<img src="sds_files/figure-html/vor-1.png" alt="left: convex hull (red) around a polygon (black); right: voronoi diagram (red) from a `MULTIPOINT` (black)" width="60%" />
<p class="caption">
Figure 3.3: left: convex hull (red) around a polygon (black); right: voronoi diagram (red) from a <code>MULTIPOINT</code> (black)
</p>
</div>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb39-1" title="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">rep</span>(<span class="dv">0</span>,<span class="dv">4</span>), <span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb39-2" title="2"><span class="kw">plot</span>(<span class="kw">st_geometry</span>(nc)[<span class="dv">1</span>], <span class="dt">col =</span> <span class="ot">NA</span>, <span class="dt">border =</span> <span class="st">&#39;black&#39;</span>)</a>
<a class="sourceLine" id="cb39-3" title="3"><span class="kw">plot</span>(<span class="kw">st_convex_hull</span>(<span class="kw">st_geometry</span>(nc)[<span class="dv">1</span>]), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="ot">NA</span>, <span class="dt">border =</span> <span class="st">&#39;red&#39;</span>)</a>
<a class="sourceLine" id="cb39-4" title="4"><span class="kw">box</span>()</a>
<a class="sourceLine" id="cb39-5" title="5"><span class="kw">set.seed</span>(<span class="dv">131</span>)</a>
<a class="sourceLine" id="cb39-6" title="6">mp =<span class="st"> </span><span class="kw">st_multipoint</span>(<span class="kw">matrix</span>(<span class="kw">runif</span>(<span class="dv">20</span>), <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb39-7" title="7"><span class="kw">plot</span>(mp)</a>
<a class="sourceLine" id="cb39-8" title="8"><span class="kw">plot</span>(<span class="kw">st_voronoi</span>(mp), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="ot">NA</span>, <span class="dt">border =</span> <span class="st">&#39;red&#39;</span>)</a>
<a class="sourceLine" id="cb39-9" title="9"><span class="kw">box</span>()</a></code></pre></div>
</details>
</div>
<div id="bintrans" class="section level3">
<h3><span class="header-section-number">3.2.6</span> Binary Transformers</h3>
<p>Binary functions that return a geometry include</p>
<table>
<colgroup>
<col width="20%" />
<col width="64%" />
<col width="15%" />
</colgroup>
<thead>
<tr class="header">
<th>function</th>
<th>returns</th>
<th align="center">infix operator</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>intersection</code></td>
<td>the overlapping geometries for pair of geometries</td>
<td align="center"><code>&amp;</code></td>
</tr>
<tr class="even">
<td><code>union</code></td>
<td>the combination of the geometries; removes internal boundaries and duplicate points, nodes or line pieces</td>
<td align="center"><code>|</code></td>
</tr>
<tr class="odd">
<td><code>difference</code></td>
<td>the geometries of the first after removing the overlap with the second geometry</td>
<td align="center"><code>/</code></td>
</tr>
<tr class="even">
<td><code>sym_differenec</code></td>
<td>the combinations of the geometries after removing where they overlap</td>
<td align="center"><code>%/%</code></td>
</tr>
</tbody>
</table>
</div>
<div id="n-ary-transformers" class="section level3">
<h3><span class="header-section-number">3.2.7</span> N-ary transformers</h3>
<p>N-ary operate on sets of geometries.
<code>union</code> can be applied to a set of geometries to return its
geometrical union. Otherwise, any set of geometries can be combined
into a <code>MULTI</code>-type geometry when they have equal dimension, or
else into a <code>GEOMETRYCOLLECTION</code>. Without unioning, this may
lead to a geometry that is not valid, e.g. because two polygon
rings have a boundary line in common.</p>
<p>N-ary <code>intersection</code> and <code>difference</code> take a single argument,
but operate (sequentially) on all pairs, triples, quadruples etc.
Consider the plot in figure <a href="geometries.html#fig:boxes">3.4</a>: how do we identify
the area where all three boxes overlap? Using binary intersections
gives us intersections for all pairs: 1-1, 1-1, 1-3, 2-1, 2-2, 2-3,
3-1, 3-2, 3-3, but does not let us identify areas where more than
two geometries intersect.
Figure @(fig:boxes) (right) shows the n-ary intersection: the 7
unique, non-overlapping geometries originating from intersection
of one, two, <em>or more</em> geometries.</p>
<div class="figure" style="text-align: center"><span id="fig:boxes"></span>
<img src="sds_files/figure-html/boxes-1.png" alt="left: three overlapping boxes -- how do we identify the small box where all three overlap? right: unique, non-overlapping n-ary intersections" width="50%" />
<p class="caption">
Figure 3.4: left: three overlapping boxes – how do we identify the small box where all three overlap? right: unique, non-overlapping n-ary intersections
</p>
</div>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb40-1" title="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">rep</span>(.<span class="dv">1</span>, <span class="dv">4</span>), <span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>))</a>
<a class="sourceLine" id="cb40-2" title="2">sq =<span class="st"> </span><span class="cf">function</span>(pt, <span class="dt">sz =</span> <span class="dv">1</span>) <span class="kw">st_polygon</span>(<span class="kw">list</span>(<span class="kw">rbind</span>(<span class="kw">c</span>(pt <span class="op">-</span><span class="st"> </span>sz), </a>
<a class="sourceLine" id="cb40-3" title="3">  <span class="kw">c</span>(pt[<span class="dv">1</span>] <span class="op">+</span><span class="st"> </span>sz, pt[<span class="dv">2</span>] <span class="op">-</span><span class="st"> </span>sz), <span class="kw">c</span>(pt <span class="op">+</span><span class="st"> </span>sz), <span class="kw">c</span>(pt[<span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>sz, pt[<span class="dv">2</span>] <span class="op">+</span><span class="st"> </span>sz), <span class="kw">c</span>(pt <span class="op">-</span><span class="st"> </span>sz))))</a>
<a class="sourceLine" id="cb40-4" title="4">x =<span class="st"> </span><span class="kw">st_sf</span>(<span class="dt">box =</span> <span class="dv">1</span><span class="op">:</span><span class="dv">3</span>, <span class="kw">st_sfc</span>(<span class="kw">sq</span>(<span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>)), <span class="kw">sq</span>(<span class="kw">c</span>(<span class="fl">1.7</span>, <span class="fl">-0.5</span>)), <span class="kw">sq</span>(<span class="kw">c</span>(<span class="fl">0.5</span>, <span class="dv">1</span>))))</a>
<a class="sourceLine" id="cb40-5" title="5"><span class="kw">plot</span>(<span class="kw">st_geometry</span>(x), <span class="dt">col =</span> <span class="ot">NA</span>, <span class="dt">border =</span> <span class="kw">sf.colors</span>(<span class="dv">3</span>, <span class="dt">categorical=</span><span class="ot">TRUE</span>), <span class="dt">lwd =</span> <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb40-6" title="6"><span class="kw">plot</span>(<span class="kw">st_intersection</span>(<span class="kw">st_geometry</span>(x)), <span class="dt">col =</span> <span class="kw">sf.colors</span>(<span class="dv">7</span>, <span class="dt">categorical=</span><span class="ot">TRUE</span>, <span class="dt">alpha =</span> <span class="fl">.5</span>))</a></code></pre></div>
</details>
<p>Similarly, one can compute an n-ary <em>difference</em> from a set <span class="math inline">\(\{s_1, s_2, s_3, ...\}\)</span> by creating differences <span class="math inline">\(\{s_1, s_2-s_1, s_3-s_2-s_1, ...\}\)</span>. This is shown in figure <a href="geometries.html#fig:diff">3.5</a>, left for the original
set, right for the set after reversing its order to make clear that
the result here depends on the ordering of the input geometries. Again,
resulting geometries do not overlap.</p>
<div class="figure" style="text-align: center"><span id="fig:diff"></span>
<img src="sds_files/figure-html/diff-1.png" alt="difference between subsequent boxes, left: in original order; right: in reverse order" width="50%" />
<p class="caption">
Figure 3.5: difference between subsequent boxes, left: in original order; right: in reverse order
</p>
</div>
<details>
<p><summary style="color:blue;">Click for Code</summary></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb41-1" title="1"><span class="kw">par</span>(<span class="dt">mar =</span> <span class="kw">rep</span>(.<span class="dv">1</span>, <span class="dv">4</span>), <span class="dt">mfrow =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">2</span>)) </a>
<a class="sourceLine" id="cb41-2" title="2">xg =<span class="st"> </span><span class="kw">st_geometry</span>(x)</a>
<a class="sourceLine" id="cb41-3" title="3"><span class="kw">plot</span>(<span class="kw">st_difference</span>(xg), <span class="dt">col =</span> <span class="kw">sf.colors</span>(<span class="dv">3</span>, <span class="dt">alpha =</span> <span class="fl">.5</span>, <span class="dt">categorical=</span><span class="ot">TRUE</span>))</a>
<a class="sourceLine" id="cb41-4" title="4"><span class="kw">plot</span>(<span class="kw">st_difference</span>(xg[<span class="dv">3</span><span class="op">:</span><span class="dv">1</span>]), <span class="dt">col =</span> <span class="kw">sf.colors</span>(<span class="dv">3</span>, <span class="dt">alpha =</span> <span class="fl">.5</span>, <span class="dt">categorical=</span><span class="ot">TRUE</span>))</a></code></pre></div>
</details>
</div>
</div>
<div id="precision" class="section level2">
<h2><span class="header-section-number">3.3</span> Precision</h2>
<p>Geometrical operations, such as finding out whether a certain
point is on a line, may fail when coordinates are represented by
double precision floating point numbers, such as 8-byte doubles
used in R. An often chosen remedy is to limit the precision of the
coordinates before the operation. For this, a <em>precision model</em>
is adopted; the most common is to choose a factor <span class="math inline">\(p\)</span> and compute
rounded coordinates <span class="math inline">\(c&#39;\)</span> from original coordinates <span class="math inline">\(c\)</span> by
<span class="math display">\[c&#39; = \mbox{round}(p \cdot c) / p\]</span></p>
<p>Rounding of this kind brings the coordinates to points on a
regular grid with spacing <span class="math inline">\(1/p\)</span>, which is beneficial for geometric
computations. Of course, it also affects all computations like
areas and distances, and may turn valid geometries into invalid
ones. Which precision values are best for which application is
often a matter of common sense combined with trial and error. A
reproducible example illustrating the need for setting precision
is found <a href="https://github.com/r-spatial/sf/issues/275">here</a>.</p>
</div>
<div id="geomraster" class="section level2">
<h2><span class="header-section-number">3.4</span> Coverages: tesselations and rasters</h2>
<div id="fixme-discuss-de9-im-and-uniquely-assigning-all-points" class="section level4">
<h4><span class="header-section-number">3.4.0.1</span> FIXME: discuss DE9-IM and uniquely assigning <em>all</em> points!!</h4>
</div>
<div id="spatial-predicates-are-topologically-invariant-binary-spatial-relations-based-on-the-de-9im" class="section level3">
<h3><span class="header-section-number">3.4.1</span> “Spatial predicates are topologically-invariant binary spatial relations based on the DE-9IM”</h3>
</div>
<div id="invariant-under-homeomorphisms.-projections-are-in-general-no-homeomorphisms." class="section level3">
<h3><span class="header-section-number">3.4.2</span> invariant under homeomorphisms. Projections are, in general, no homeomorphisms.</h3>
</div>
<div id="mappings-that-preserve-all-the-topological-properties-of-a-given-space" class="section level3">
<h3><span class="header-section-number">3.4.3</span> (mappings that preserve all the topological properties of a given space)</h3>
<p>OGC <span class="citation">(Baumann, Hirschorn, and Masó <a href="#ref-ogccov">2017</a>)</span> defines a <em>coverage</em> as a ``feature that acts as a
function to return values from its range for any direct position
within its spatiotemporal domain’’. Having a <em>function</em> implies that
for every spatiotemporal “point” (spatial point and moment in time)
of the domain we have <em>single</em> value for the range. This is a very
common situation for many spatiotemporal phenomena, a few examples
can be given:</p>
<ul>
<li>boundary disputes aside, every point in a region (domain) belongs to a single adminstrative unit (range)</li>
<li>at any given moment in time, every point in a region (domain) has a certain <em>land cover type</em> (range)</li>
<li>every point in an area (domain) has a single elevation (range), e.g. measured with respect to a given mean sea level surface</li>
<li>every spatiotemporal point in a threedimensional body of air (domain) has single value for temperature (range)</li>
</ul>
<p>(A caveat here is that because measurement always takes time
and requires space, measured values are always an average over
a spatiotemporal volume, and hence range variables can rarely be
measured for true, zero-volume “points”; for many practical cases
however the measured volume is small enough to be considered a
“point”; for a variable like <em>land cover type</em> the volume needs to
be chosen such that the types distinguished make sense with respect
to the measured units).</p>
<p>In the first two of the given examples the range variable is
<em>categorical</em>, in the last two the range variable is <em>continuous</em>.
For categorical range variables, if large connected areas have a
constant range value, an efficient way to represent these data
is by storing the boundaries of the areas with constant value,
such as country boundaries. Although this can be done by a set of
simple feature geometries (polygons or multipolygons), it is hard
to guarantee for such a set of simple feature polygons that they
do not overlap, or that there are no gaps between them.</p>
</div>
<div id="topological-models" class="section level3">
<h3><span class="header-section-number">3.4.4</span> Topological models</h3>
<p>A data model that guarantees no inadvertent gaps or overlaps of
polygonal coverages is the <em>topological</em> model, examples of which
are found in geographic information systems (GIS) like GRASS GIS
or ArcGIS. Topological models store boundaries between polygons
only once, and register which polygonal area is on either side
of a boundary.</p>
<p>Deriving the set of (multi)polygons for each area with a constant
range value from a topological model is straightforward; the other
way around: deriving topology from a set of polygons involves
setting thresholds and handling gaps and overlaps.</p>
</div>
<div id="raster-tesselations" class="section level3">
<h3><span class="header-section-number">3.4.5</span> Raster tesselations</h3>
<p>A tesselation is a subdivision of a space (area, volume) into
smaller elements by ways of polygons. A regular tesselation
does this with regular polygons: triangles, squares or hexagons.
Tesselations using squares are very commonly used for spatial data,
and are called <em>raster data</em>. Raster data
tesselate each spatial dimension <span class="math inline">\(d\)</span> into regular cells,
formed e.g. by left-closed and right-open intervals <span class="math inline">\(d_i\)</span>:
<span class="math display">\[\begin{equation}
d_i = d_0 + [~ i \cdot \delta, (i+1) \cdot \delta~)
\end{equation}\]</span>
with <span class="math inline">\(d_0\)</span> an offset, <span class="math inline">\(\delta\)</span> the interval (cell or
pixel) size, and where the cell index <span class="math inline">\(i\)</span> is an arbitrary but
consecutive set of integers. The <span class="math inline">\(\delta\)</span> value is often taken
negative for the <span class="math inline">\(y\)</span>-axis (Northing), indicating that raster
row numbers increasing Southwards correspond to <span class="math inline">\(y\)</span>-coordinates
increasing Northwards.</p>
<p>In arbitrary polygon tesselations, assigning points to polygons
when they fall on a boundary shared by two polygons is ambiguous.
Using left-closed “[” and right-open “)” intervals in regular
tesselations removes this ambiguity.</p>
<p>Tesselating the time dimension with left-closed, right-open intervals
is very common, and reflects the implicit assumption underlying
time series packages such as <code>xts</code> in R, where time stamps indicate
the start of time intervals. Different models can be combined:
one could use simple feature polygons to tesselate space, and
combine this with a regular tesselation of time in order to cover
a space-time <em>vector datacube</em>. Raster data and data cubes are
discussed in chapter <a href="raster.html#raster">6</a>.</p>
</div>
</div>
<div id="networks" class="section level2">
<h2><span class="header-section-number">3.5</span> Networks</h2>
<p>Spatial networks are typically composed of linear (<code>LINESTRING</code>)
elements, but possess further topological properties describing
the network coherence:</p>
<ul>
<li>start and endpoints of a linestring may be connected to other linestring
start or end points, forming a set of nodes and edges</li>
<li>edges may be directed, and allow for connections (flow, transport)
in only one way.</li>
</ul>
<p>Several R packages (<code>osmar</code>, <code>stplanr</code>, <code>sfnetworks</code>) have functionality
available for constructing network objects, and working with them,
e.g. computing shortest or fastest routes through a network.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references">
<div id="ref-ogccov">
<p>Baumann, Peter, Eric Hirschorn, and Joan Masó. 2017. “OGC Coverage Implementation Schema.” <em>OGC Implementation Standard</em>. <a href="https://docs.opengeospatial.org/is/09-146r6/09-146r6.html">https://docs.opengeospatial.org/is/09-146r6/09-146r6.html</a>.</p>
</div>
<div id="ref-de9im1">
<p>Clementini, Eliseo, Paolino Di Felice, and Peter van Oosterom. 1993. “A Small Set of Formal Topological Relationships Suitable for End-User Interaction.” In <em>Advances in Spatial Databases</em>, edited by David Abel and Beng Chin Ooi, 277–95. Berlin, Heidelberg: Springer Berlin Heidelberg.</p>
</div>
<div id="ref-sfa">
<p>Herring, John R. 2011. “OpenGIS Implementation Standard for Geographic Information-Simple Feature Access-Part 1: Common Architecture.” <em>Open Geospatial Consortium Inc</em>, 111. <a href="http://portal.opengeospatial.org/files/?artifact_id=25355">http://portal.opengeospatial.org/files/?artifact_id=25355</a>.</p>
</div>
<div id="ref-rjsf">
<p>Pebesma, Edzer. 2018. “Simple Features for R: Standardized Support for Spatial Vector Data.” <em>The R Journal</em> 10 (1): 439–46. <a href="https://doi.org/10.32614/RJ-2018-009">https://doi.org/10.32614/RJ-2018-009</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="cs.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="spherical.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/edzer/sdsr/edit/master/03-Geometries.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["sds.pdf", "sds.epub"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
